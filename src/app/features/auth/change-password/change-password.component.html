<p-toast></p-toast>

<div class="title-container">
  <h1>Add New Password</h1>
  <p class="subtitle">Set a new password to log in.</p>
</div>

<form [formGroup]="changePasswordForm" (submit)="changePassword()">
  <div class="single-input">
    <label for="CurrentPassword">Current Password</label>
    <p-password
      formControlName="CurrentPassword"
      [toggleMask]="true"
      [fluid]="true"
      inputId="CurrentPassword"
      placeholder="Enter your Old Password"
      [feedback]="false"
    />
    <div *ngIf="changePasswordForm.get('CurrentPassword')?.touched && changePasswordForm.get('CurrentPassword')?.invalid">
      <small *ngIf="changePasswordForm.get('CurrentPassword')?.hasError('required')">Password is required</small>
      <small *ngIf="changePasswordForm.get('CurrentPassword')?.hasError('minlength')">Password must be at least 8 characters</small>
    </div>
  </div>

  <div class="single-input">
    <label for="newPassword">New Password</label>
    <p-password
      formControlName="newPassword"
      [toggleMask]="true"
      [fluid]="true"
      inputId="newPassword"
      placeholder="Enter your New Password"
      [feedback]="false"
    />
    <div *ngIf="changePasswordForm.get('newPassword')?.touched && changePasswordForm.get('newPassword')?.invalid">
      <small *ngIf="changePasswordForm.get('newPassword')?.hasError('required')">Password is required</small>
      <small *ngIf="changePasswordForm.get('newPassword')?.hasError('minlength')">Password must be at least 8 characters</small>
    </div>
  </div>

  <div class="single-input">
    <label for="confirmPassword">Confirm New Password</label>
    <p-password
      formControlName="confirmPassword"
      [toggleMask]="true"
      [fluid]="true"
      inputId="confirmPassword"
      placeholder="Confirm your new password"
      [feedback]="false"
    />
    <div *ngIf="changePasswordForm.get('confirmPassword')?.touched && changePasswordForm.get('confirmPassword')?.invalid">
      <small *ngIf="changePasswordForm.get('confirmPassword')?.hasError('required')">Confirm password is required</small>
      <small *ngIf="changePasswordForm.get('confirmPassword')?.hasError('passwordMismatch')">Passwords do not match</small>
    </div>
  </div>

  <div class="btn-submit-container">
    <button type="submit" class="btn-submit" [disabled]="loading">
      <span *ngIf="loading">Changing...</span>
      <span *ngIf="!loading">Change Password</span>
    </button>
  </div>
</form>
